@{
    Layout = "~/Views/Shared/_Wall.cshtml";
}

@section stylesheets{
    <link href="~/Content/draw.css" rel="stylesheet" />
<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">
}

<div id="drawSpace"></div>

@section scripts {
    <script type="text/javascript" src="/Scripts/hammer.min.js"></script>
    <script type="text/javascript" src="/Scripts/draw.js"></script>
    <script type="text/javascript">
        var _baseApiUrl = 'http://local.api.massivemoose.com';
        var sessionToken = '12345';
        var draw = Draw();
        draw.initialize(document.getElementById('drawSpace'),
        {
            width: window.innerWidth,
            height: window.innerHeight,
            onExportImage: function(imageData,json) {
                var xhr = new XMLHttpRequest();
                xhr.open('POST', _baseApiUrl + '/v1/save/' + sessionToken, true);
                xhr.setRequestHeader('Content-Type', 'application/json');
                xhr.send('{"snapshotJson":"' + escape(json) + '","imageData":"' + imageData + '"}');
            },
            onCanceled: function () { alert('canceled'); mm.enableToolbar(); }
        });
    </script>
}
