<!DOCTYPE html>

<html>
<head>

    <title>draw</title>

    <link href="/Content/blank.css" rel="stylesheet" />
    <link href="/Content/bootstrap.min.css" rel="stylesheet" />
    <link href="/Content/draw.css" rel="stylesheet" />
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="icon" type="image/gif" href="/animated_favicon1.gif">
</head>
<body>
    <div id="drawSpace"></div>

<script type="text/javascript" src="/Scripts/hammer.min.js"></script>
    <script type="text/javascript" src="/Scripts/sendbuffer.js"></script>
    <script type="text/javascript" src="/Scripts/transform.js"></script>
    <script type="text/javascript" src="/Scripts/draw.js"></script>
    <script type="text/javascript">
        var _baseApiUrl = 'http://local.api.massivemoose.com';
        var sessionToken = '12345';

        var sendBuffer = SendBuffer();
        sendBuffer.initialize({ destinationUrl: _baseApiUrl });

        sendBuffer.addListener('additem', function(data) {
             console.log('an item was added:' + data)
        });
        sendBuffer.addListener('sendfailed', function (data) {
            console.log('an item failed to send:' + data)
        });
        sendBuffer.addListener('sendsucceeded', function (data) {
            console.log('an item was successfully uploaded:' + data)
        });

        var draw = Draw();
        draw.initialize(document.getElementById('drawSpace'),
        {
            width: 1600,
            height: 900,
            quality:2,
            onExportImage: function(imageData,json) {
                console.log('onExportImage');
            },
            onExportImageSucceeded: function(moose) {
                console.log('hide the canvas here');
            },
            onCanceled: function () { console.log('onCanceled'); },
            debug: true,
            sendBuffer: sendBuffer
        });
        draw.startDrawing({ data: null });
    </script>
</body>
</html>
